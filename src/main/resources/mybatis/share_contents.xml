<?xml version="1.0" encoding="UTF-8"?>
 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dev.mvc.share_contents.Share_contentsDAOInter"> <!-- SB가 자동으로 구현하여 연동하는 interface -->
 
 <!--  전체 목록  -->
  <select id="list_all" resultType="dev.mvc.share_contentsdto.Share_contentsVO">
		SELECT scon_no, scon_title, scon_contents, scon_views, scon_comment, scon_date,scon_priority
		FROM share_contents
  </select>
  <!--  사진 전체 목록  -->
  <select id = "list_all_image" resultType="dev.mvc.share_contentsdto.Share_imageVO">
   SELECT file_no,scon_no,file_origin_name,file_upload_name,file_thumb_name,file_size,file_date
		FROM share_image
  </select>
  
  <!-- 해당 컨텐츠 목록 -->
  <select id="read" resultType="dev.mvc.share_contentsdto.Share_contentsVO" parameterType="Integer">
  SELECT scon_no, scon_title, scon_contents, scon_views, scon_date, pro_no ,cate_no 
  FROM share_contents
  where scon_no=#{scon_no}
  </select>
  
   <update id="update_view" parameterType="dev.mvc.share_contentsdto.Share_contentsVO">
   UPDATE share_contents
	 SET scon_views=scon_views+1
	 WHERE scon_no=#{scon_no}
 	</update>
 	
  <update id="update_text" parameterType="dev.mvc.share_contentsdto.Share_contentsVO">
  update share_contents
  set scon_title=#{scon_title},scon_contents=#{scon_contents}
  where scon_no=#{scon_no}
  </update>
  
  <insert id="create" parameterType="dev.mvc.share_contentsdto.Share_contentsVO">
    INSERT INTO share_contents(scon_no, scon_title, scon_contents,scon_bookmark, 
                       scon_views,scon_date, pro_no,cate_no)
    VALUES(share_contents_SEQ.nextval,#{scon_title},#{scon_contents},1,0,sysdate,1,1)
  </insert>
  
  <delete id="delete" parameterType="int">
    DELETE FROM share_contents
    WHERE scon_no=#{scon_no}
  </delete>
  
  <insert id="create_comment" parameterType="HashMap">
    INSERT INTO share_comment(scmt_no, scon_no, scmt_comment,scmt_date, pro_no)
    VALUES(share_comment_SEQ.nextval,#{scon_no},#{scmt_comment},sysdate,1)
  </insert>
  
  <select id="read_comment" resultType="dev.mvc.share_contentsdto.Share_commentsVO" parameterType="Integer">
    SELECT scmt_comment,scmt_date,pro_no
    FROM share_comment
    WHERE  scon_no=#{scon_no}
   </select>
   
   <insert id="create_image" parameterType="dev.mvc.share_contentsdto.Share_imageVO">
     INSERT INTO share_image(file_no, scon_no, file_origin_name, file_upload_name, file_thumb_name, file_size, file_date)
    VALUES(share_image_seq.nextval, #{scon_no}, #{file_origin_name} , #{file_upload_name}, #{file_thumb_name}, #{file_size} sysdate)
   </insert>

  
</mapper>










